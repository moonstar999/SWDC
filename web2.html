<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Voice Order System</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    #output, #instructions {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #aaa;
      background: #f9f9f9;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #444;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #eee;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <header>
    <div id="date"></div>
    <div id="time"></div>
  </header>

  <button id="start-btn">ğŸ¤ Start Listening</button>

  <div id="instructions">
    ğŸ”Š <strong>Ø¨ÙˆÙ„Ù†Û’ Ú©Ø§ Ø·Ø±ÛŒÙ‚Û:</strong><br>
    <code>
      A system 12 delivery two burger<br>
      A system 15 pending Ø¯Ùˆ Ø²Ù†Ú¯Ø±<br>
    </code>
    <br>
    âœ… Recognizes both English and Urdu numbers like "two" or "Ø¯Ùˆ"
  </div>

  <div id="output">ğŸ—£ <em>Your voice command will appear here...</em></div>

  <table>
    <thead>
      <tr>
        <th>âœ”</th>
        <th>Bill No</th>
        <th>Status</th>
        <th>Quantity</th>
        <th>Item</th>
      </tr>
    </thead>
    <tbody id="orders-body">
      <!-- Rows will be added here -->
    </tbody>
  </table>

  <script>
    function updateDateTime() {
      const now = new Date();
      document.getElementById('date').textContent = 'Date: ' + now.toLocaleDateString();
      document.getElementById('time').textContent = 'Time: ' + now.toLocaleTimeString();
    }
    setInterval(updateDateTime, 1000);
    updateDateTime();

    const output = document.getElementById('output');
    const ordersBody = document.getElementById('orders-body');
    const startBtn = document.getElementById('start-btn');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      alert("Your browser does not support Speech Recognition.");
    } else {
      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';  // Ø§Ø±Ø¯Ùˆ Ø§ÙˆØ± Ø§Ù†Ú¯Ø±ÛŒØ²ÛŒ Ø¯ÙˆÙ†ÙˆÚº Ú©ÛŒ Ø³Ù¾ÙˆØ±Ù¹
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      startBtn.addEventListener('click', () => {
        recognition.start();
        output.textContent = "ğŸ¤ Listening... speak your command now!";
      });

      recognition.onresult = (event) => {
        const speech = event.results[0][0].transcript.toLowerCase();
        output.textContent = `ğŸ—£ You said: "${speech}"`;
        processCommand(speech);
      };

      recognition.onerror = (event) => {
        output.textContent = `âŒ Error: ${event.error}`;
      };
    }

    function processCommand(text) {
      if (!text.startsWith("a")) {
        output.textContent += "\nâš ï¸ Please start command with 'A system'";
        return;
      }

      // Example: "a system 12 delivery two burger" OR "a system 15 delivery Ø¯Ùˆ Ø²Ù†Ú¯Ø±"
      const words = text.split(" ");

      // Check minimum words length
      if (words.length < 5) {
        output.textContent += "\nâ— Incomplete command.";
        return;
      }

      // Extracting data
      let billNo = words[2];
      let status = words[3];
      let quantity = words[4];
      let item = words.slice(5).join(" ");

      // Handle Urdu numbers like "Ø¯Ùˆ"
      const urduToEnglishNumbers = {
        'Ø¯Ùˆ': '2',
        'ØªÛŒÙ†': '3',
        'Ú†Ø§Ø±': '4',
        'Ù¾Ø§Ù†Ú†': '5',
        'Ú†Ú¾': '6',
        'Ø³Ø§Øª': '7',
        'Ø¢Ù¹Ú¾': '8',
        'Ù†Ùˆ': '9',
        'Ø¯Ø³': '10'
      };
      if (urduToEnglishNumbers[quantity]) {
        quantity = urduToEnglishNumbers[quantity];
      }

      if (billNo && status && quantity && item) {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td><input type="checkbox"></td>
          <td>${billNo}</td>
          <td>${status}</td>
          <td>${quantity}</td>
          <td>${item}</td>
        `;
        ordersBody.appendChild(row);
        output.textContent += "\nâœ… Order added successfully.";
      } else {
        output.textContent += "\nâ— Command format not recognized properly.";
      }
    }
  </script>

</body>
</html>
